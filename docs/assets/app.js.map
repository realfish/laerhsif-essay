{"version":3,"file":"app.js","sources":["../../src/javascript/_misc.js","../../src/javascript/view/http404.js","../../src/javascript/view/index.js","../../src/javascript/view/essay.js","../../src/javascript/app.js"],"sourcesContent":["export default function () {\n\tlet doc = document;\n\n\t// UA marking\n\tconst UA_LIST = ['iPhone', 'iPad', 'MQQBrowser', 'Android', 'MicroMessenger'];\n\tlet ua = navigator.userAgent;\n\tlet $html = doc.getElementsByTagName('html')[0];\n\tfor (let i = 0; i < UA_LIST.length; i++) {\n\t\tvar uaRegExp = new RegExp(UA_LIST[i]);\n\t\t\n\t\tif (ua.match(uaRegExp)) {\n\t\t\t$html.classList.add('ua-' + UA_LIST[i]);\n\t\t}\n\t}\n\tif (ua.indexOf('Safari') !== -1 && ua.indexOf('Chrome') === -1) {\n\t\t$html.classList.add('ua-Safari');\n\t}\n\tif (!('ontouchstart' in window)) {\n\t\t$html.classList.add('ua-Pointer');\n\t}\n\n\t// Enable the CSS `:active` interactions\n\tdoc.getElementsByTagName('body')[0].addEventListener('touchstart', function(){});\n\tdoc.getElementsByTagName('main')[0].addEventListener('touchstart', function(){});\n\n\t// Twist HTML language\n\t// doc.getElementsByTagName('html')[0].setAttribute('lang', 'en');\n}\n","/* global Han */\n\nexport default function () {\n\nlet doc = document;\nlet win = window;\n\n\n\n// Init Han.css\nHan(doc.querySelector('.article'))\n.initCond()\n.renderElem()\n.renderHanging()\n.renderJiya()\n.renderHWS()\n/* .correctBasicBD() */\n/* .substCombLigaWithPUA() */;\n\n\n\n// Click endmark to go to Index\nlet $body = doc.querySelector('.article-body');\nlet winWidth;\n\n$body.addEventListener('click', function (e) {\n\twinWidth = win.innerWidth || doc.clientWidth || doc.body.clientWidth;\n\t\n\tconst ENDMARK_H = winWidth > 480 ? 32 : 28;\n\t\n\tlet clickX = e.offsetX;\n\tlet clickY = e.offsetY;\n\tlet bodyW  = $body.offsetWidth;\n\tlet bodyH  = $body.offsetHeight;\n\tlet bodyPW = $body.querySelector('p').clientWidth;\n\t\n\tif ((clickY <= bodyH && clickY >= bodyH - ENDMARK_H) &&\n\t    (clickX >= (bodyW - bodyPW)/2 && clickX <= bodyW - (bodyW - bodyPW)/2)) {\n\t\t// console.log('bang H & W');\n\t\twin.location.href = doc.querySelector('body').getAttribute('data-root');\n\t}\n});\n\n\n\n}\n","/* global Han */\n\nexport default function () {\n\nlet doc = document;\n// let win = window;\n\n\n\n// Init Han.css\nHan(doc.querySelector('.index-list'))\n.initCond()\n.renderElem()\n.renderHanging()\n.renderJiya()\n.renderHWS()\n/* .correctBasicBD() */\n/* .substCombLigaWithPUA() */;\n\n\n\n}\n","/* global Han */\n\nexport default function () {\n\nlet doc = document;\nlet win = window;\n\n\n\n// Init Han.css\nHan(doc.querySelector('.article'))\n.initCond()\n.renderElem()\n.renderHanging()\n.renderJiya()\n.renderHWS()\n/* .correctBasicBD() */\n/* .substCombLigaWithPUA() */;\n\n\n\n// Positioning footnotes\nconst SCREEN_WIDTH_THRESHOLD = 896;\n\nlet $wrap       = doc.querySelector('.article');\nlet $body       = doc.querySelector('.article-body');\nlet $footnote   = doc.querySelector('.article-footnote');\nlet $allFnItems = doc.querySelectorAll('.article-footnote li');\nlet $allFnMarks = doc.querySelectorAll('.article-body .fn-mark');\nlet wrapTop, bodyWidth, bodyPLeft, bodyPWidth, winWidth;\n\nlet fnPositionSide = function () {\n\twrapTop    = $wrap.offsetTop;\n\tbodyWidth  = $body.offsetWidth;\n\tbodyPLeft  = $body.querySelector('p').offsetLeft;\n\tbodyPWidth = $body.querySelector('p').offsetWidth;\n\t\n\t$footnote.style.top   = wrapTop + 'px';\n\t$footnote.style.right = bodyWidth - bodyPLeft - bodyPWidth + 'px';\n\t$footnote.style.width = '';\n\t\n\tfor (let i = 0; i < $allFnItems.length; i++) {\n\t\tlet $crntItem   = $allFnItems[i];\n\t\tlet $crntMark   = $allFnMarks[i];\n\t\tlet crntMarkTop = $crntMark.offsetTop;\n\t\t\n\t\t$crntItem.style.top = crntMarkTop + 'px';\n\t\t$crntItem.style.left = $crntItem.style.right = '';\n\t\t$crntItem.style.setProperty('--arrow-left', '');\n\t}\n};\nlet funPositionInline = function () {\n\twrapTop    = $wrap.offsetTop;\n\tbodyWidth  = $body.offsetWidth;\n\tbodyPLeft  = $body.querySelector('p').offsetLeft;\n\tbodyPWidth = $body.querySelector('p').offsetWidth;\n\t\n\t$footnote.style.top   = wrapTop + 'px';\n\t$footnote.style.right = bodyWidth - bodyPLeft - bodyPWidth + 'px';\n\t$footnote.style.width = bodyPWidth + 'px';\n\t\n\t// Compute the line-height of <p>\n\tlet pLH = win.getComputedStyle(doc.querySelector('.article-body p')).getPropertyValue('line-height');\n\tpLH = pLH.substring(0, pLH.length - 2);\n\t\n\tfor (let i = 0; i < $allFnItems.length; i++) {\n\t\tlet $crntItem    = $allFnItems[i];\n\t\tlet $crntMark    = $allFnMarks[i];\n\t\tlet crntMarkTop  = $crntMark.offsetTop;\n\t\tlet crntMarkLeft = $crntMark.offsetLeft;\n\t\t\n\t\t$crntItem.style.top = crntMarkTop + parseInt(pLH, 10) + 'px';\n\t\t\n\t\tif (crntMarkLeft <= bodyWidth / 2) {\n\t\t\t$crntItem.style.left  = '0px';\n\t\t\t$crntItem.style.right = '';\n\t\t} else {\n\t\t\t$crntItem.style.left  = '';\n\t\t\t$crntItem.style.right = '0px';\n\t\t}\n\t\t\n\t\tlet crntItemLeft = $crntItem.offsetLeft;\t// This value is updated by above settings\n\t\tlet arrowLeft = crntMarkLeft - (crntItemLeft + (bodyWidth - bodyPWidth)/2);\n\t\t$crntItem.style.setProperty('--arrow-left', arrowLeft - 2 + 'px');\n\t}\n};\n\nif ($allFnItems.length > 0 && $allFnMarks.length > 0) {\n\twin.addEventListener('load', function () {\n\t\twinWidth = win.innerWidth || doc.clientWidth || doc.body.clientWidth;\n\t\t\n\t\tif (winWidth > SCREEN_WIDTH_THRESHOLD) {\n\t\t\tfnPositionSide();\n\t\t} else {\n\t\t\tfunPositionInline();\n\t\t}\n\t});\n\twin.addEventListener('resize', function () {\n\t\twinWidth = win.innerWidth || doc.clientWidth || doc.body.clientWidth;\n\t\t\n\t\tif (winWidth > SCREEN_WIDTH_THRESHOLD) {\n\t\t\tfnPositionSide();\n\t\t} else {\n\t\t\tfunPositionInline();\n\t\t}\n\t});\n\t\n\tfor (let i = 0; i < $allFnMarks.length; i++) {\n\t\tlet $crntFnMark = $allFnMarks[i];\n\t\t\n\t\t$crntFnMark.addEventListener('click', function (e) {\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tif (winWidth > SCREEN_WIDTH_THRESHOLD) {\n\t\t\t\t// Scroll to the related side note\n\t\t\t} else {\n\t\t\t\t// Toggle (show/hide) the related inline note\n\t\t\t\t$allFnItems[i].classList.toggle('is-active');\n\t\t\t}\n\t\t\t\n\t\t\t// Update hash URL without window scrolling\n\t\t\tlet $target = e.target;\n\t\t\twhile ( $target && !$target.matches('.article-body a.fn-mark, body') ) {\n\t\t\t\t$target = $target.parentNode;\n\t\t\t}\n\t\t\tif ($target && $target.matches('.article-body a.fn-mark')) {\n\t\t\t\tlet targetHash = $target.getAttribute('href');\n\t\t\t\tif (targetHash !== win.location.hash) {\n\t\t\t\t\thistory.pushState({}, '', targetHash);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\tdoc.addEventListener('click', function (e) {\n\t\tlet $target = e.target;\n\t\t\n\t\twhile ( $target && !$target.matches('.article-footnote li.is-active, .fn-mark, body') ) {\n\t\t\t$target = $target.parentNode;\n\t\t}\n\t\t\n\t\tif ( !($target && $target.matches('.article-footnote li.is-active, .fn-mark')) ) {\n\t\t\t// Click the area apart from notes or marks, hide all active notes\n\t\t\tlet $allActiveFnItems = doc.querySelectorAll('.article-footnote li.is-active');\n\t\t\tfor (let i = 0; i < $allActiveFnItems.length; i++) {\n\t\t\t\t$allActiveFnItems[i].classList.remove('is-active');\n\t\t\t}\n\t\t}\n\t});\n}\n\n\n\n// Click endmark to go to Index\n$body.addEventListener('click', function (e) {\n\twinWidth = win.innerWidth || doc.clientWidth || doc.body.clientWidth;\n\t\n\tconst ENDMARK_H = winWidth > 480 ? 32 : 28;\n\t\n\tlet clickX = e.offsetX;\n\tlet clickY = e.offsetY;\n\tlet bodyW  = $body.offsetWidth;\n\tlet bodyH  = $body.offsetHeight;\n\tlet bodyPW = $body.querySelector('p').clientWidth;\n\t\n\tif ((clickY <= bodyH && clickY >= bodyH - ENDMARK_H) &&\n\t    (clickX >= (bodyW - bodyPW)/2 && clickX <= bodyW - (bodyW - bodyPW)/2)) {\n\t\t// console.log('bang H & W');\n\t\twin.location.href = doc.querySelector('body').getAttribute('data-root');\n\t}\n});\n\n\n\n}\n","let doc = document;\n\n// Misc\nimport _misc from './_misc';\n_misc();\n\n// Class\n\n\n\n// View\nimport viewHttp404 from './view/http404';\nimport viewIndex   from './view/index';\nimport viewEssay   from './view/essay';\n\n// View router\nlet view = doc.querySelector('body').classList[0];\n\nswitch (view) {\n\tcase 'http404': {\n\t\tviewHttp404();\n\t\tbreak;\n\t}\n\tcase 'index': {\n\t\tviewIndex();\n\t\tbreak;\n\t}\n\tcase 'essay': {\n\t\tviewEssay();\n\t\tbreak;\n\t}\n}\n\n"],"names":["doc","document","UA_LIST","ua","navigator","userAgent","$html","getElementsByTagName","i","length","uaRegExp","RegExp","match","classList","add","indexOf","window","addEventListener","win","Han","querySelector","initCond","renderElem","renderHanging","renderJiya","renderHWS","$body","winWidth","e","innerWidth","clientWidth","body","ENDMARK_H","clickX","offsetX","clickY","offsetY","bodyW","offsetWidth","bodyH","offsetHeight","bodyPW","location","href","getAttribute","SCREEN_WIDTH_THRESHOLD","$wrap","$footnote","$allFnItems","querySelectorAll","$allFnMarks","wrapTop","bodyWidth","bodyPLeft","bodyPWidth","fnPositionSide","offsetTop","offsetLeft","style","top","right","width","$crntItem","$crntMark","crntMarkTop","left","setProperty","funPositionInline","pLH","getComputedStyle","getPropertyValue","substring","crntMarkLeft","parseInt","crntItemLeft","arrowLeft","$crntFnMark","preventDefault","toggle","$target","target","matches","parentNode","targetHash","hash","history","pushState","$allActiveFnItems","remove","_misc","view","viewHttp404","viewIndex","viewEssay"],"mappings":"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"}