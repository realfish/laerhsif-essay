/*!
 * @license
 * ES6-Promise v4.2.8 | Y. Katz, T. Dale, S. Penner, et al. | MIT License | https://github.com/stefanpenner/es6-promise
 * requestAnimationFrame polyfill | Erik Möller, et al. | MIT license | https://gist.github.com/paulirish/1579671
 * 漢字標準格式 v3.3.0 | Ethan Chan | MIT License | https://hanzi.pro
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()}(this,(function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function t(e){return"function"==typeof e}function n(e){F=e}function r(e){q=e}function i(){return function(){return process.nextTick(u)}}function o(){return void 0!==B?function(){B(u)}:s()}function a(){var e=0,t=new W(u),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function c(){var e=new MessageChannel;return e.port1.onmessage=u,function(){return e.port2.postMessage(0)}}function s(){var e=setTimeout;return function(){return e(u,1)}}function u(){for(var e=0;e<D;e+=2){var t,n;(0,$[e])($[e+1]),$[e]=void 0,$[e+1]=void 0}D=0}function d(){try{var e=Function("return this")().require("vertx");return B=e.runOnLoop||e.runOnContext,o()}catch(e){return s()}}function l(e,t){var n=this,r=new this.constructor(f);void 0===r[G]&&z(r);var i=n._state;if(i){var o=arguments[i-1];q((function(){return S(i,r,o,n._result)}))}else N(n,r,e,t);return r}function h(e){var t=this;if(e&&"object"==typeof e&&e.constructor===this)return e;var n=new this(f);return x(n,e),n}function f(){}function p(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function v(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function b(e,t,n){q((function(e){var r=!1,i=v(n,t,(function(n){r||(r=!0,t!==n?x(e,n):E(e,n))}),(function(t){r||(r=!0,C(e,t))}),"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,C(e,i))}),e)}function m(e,t){t._state===Q?E(e,t._result):t._state===X?C(e,t._result):N(t,void 0,(function(t){return x(e,t)}),(function(t){return C(e,t)}))}function y(e,n,r){n.constructor===e.constructor&&r===l&&n.constructor.resolve===h?m(e,n):void 0===r?E(e,n):t(r)?b(e,n,r):E(e,n)}function x(t,n){if(t===n)C(t,p());else if(e(n)){var r=void 0;try{r=n.then}catch(e){return void C(t,e)}y(t,n,r)}else E(t,n)}function w(e){e._onerror&&e._onerror(e._result),T(e)}function E(e,t){e._state===K&&(e._result=t,e._state=Q,0!==e._subscribers.length&&q(T,e))}function C(e,t){e._state===K&&(e._state=X,e._result=t,q(w,e))}function N(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+Q]=n,i[o+X]=r,0===o&&e._state&&q(T,e)}function T(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?S(n,r,i,o):i(o);e._subscribers.length=0}}function S(e,n,r,i){var o=t(r),a=void 0,c=void 0,s=!0;if(o){try{a=r(i)}catch(e){s=!1,c=e}if(n===a)return void C(n,g())}else a=i;n._state!==K||(o&&s?x(n,a):!1===s?C(n,c):e===Q?E(n,a):e===X&&C(n,a))}function L(e,t){try{t((function t(n){x(e,n)}),(function t(n){C(e,n)}))}catch(t){C(e,t)}}function k(){return ee++}function z(e){e[G]=ee++,e._state=void 0,e._result=void 0,e._subscribers=[]}function A(){return new Error("Array Methods must be provided an Array")}function M(e){return new te(this,e).promise}function _(e){var t=this;return H(e)?new t((function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))}function I(e){var t=this,n=new this(f);return C(n,e),n}function j(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function R(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function P(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=ne}var O=void 0,H=O=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},D=0,B=void 0,F=void 0,q=function e(t,n){$[D]=t,$[D+1]=n,2===(D+=2)&&(F?F(u):J())},U="undefined"!=typeof window?window:void 0,Y=U||{},W=Y.MutationObserver||Y.WebKitMutationObserver,V="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,$=new Array(1e3),J=void 0;J=V?i():W?a():Z?c():void 0===U&&"function"==typeof require?d():s();var G=Math.random().toString(36).substring(2),K=void 0,Q=1,X=2,ee=0,te=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(f),this.promise[G]||z(this.promise),H(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?E(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&E(this.promise,this._result))):C(this.promise,A())}return e.prototype._enumerate=function e(t){for(var n=0;this._state===K&&n<t.length;n++)this._eachEntry(t[n],n)},e.prototype._eachEntry=function e(t,n){var r=this._instanceConstructor,i=r.resolve;if(i===h){var o=void 0,a=void 0,c=!1;try{o=t.then}catch(e){c=!0,a=e}if(o===l&&t._state!==K)this._settledAt(t._state,n,t._result);else if("function"!=typeof o)this._remaining--,this._result[n]=t;else if(r===ne){var s=new r(f);c?C(s,a):y(s,t,o),this._willSettleAt(s,n)}else this._willSettleAt(new r((function(e){return e(t)})),n)}else this._willSettleAt(i(t),n)},e.prototype._settledAt=function e(t,n,r){var i=this.promise;i._state===K&&(this._remaining--,t===X?C(i,r):this._result[n]=r),0===this._remaining&&E(i,this._result)},e.prototype._willSettleAt=function e(t,n){var r=this;N(t,void 0,(function(e){return r._settledAt(Q,n,e)}),(function(e){return r._settledAt(X,n,e)}))},e}(),ne=function(){function e(t){this[G]=k(),this._result=this._state=void 0,this._subscribers=[],f!==t&&("function"!=typeof t&&j(),this instanceof e?L(this,t):R())}return e.prototype.catch=function e(t){return this.then(null,t)},e.prototype.finally=function e(n){var r=this,i=this.constructor;return t(n)?this.then((function(e){return i.resolve(n()).then((function(){return e}))}),(function(e){return i.resolve(n()).then((function(){throw e}))})):this.then(n,n)},e}();return ne.prototype.then=l,ne.all=M,ne.race=_,ne.resolve=h,ne.reject=I,ne._setScheduler=n,ne._setAsap=r,ne._asap=q,ne.polyfill=P,ne.Promise=ne,ne.polyfill(),ne})),function(){"use strict";for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-e)),i=window.setTimeout((function(){t(n+r)}),r);return e=n+r,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=t(e,!0):"function"==typeof define&&define.amd?define((function(){return t(e,!0)})):t(e)}("undefined"!=typeof window?window:this,(function(e,t){"use strict";function n(e){return"function"==typeof e||e instanceof Element?e:void 0}function r(e){var t=0===e.index&&e.isEnd?"biaodian cjk":"biaodian cjk portion "+(0===e.index?"is-first":e.isEnd?"is-end":"is-inner"),n=we.create("h-char-group",t);return n.innerHTML=e.text,n}function i(e){var t=we.create("div"),n=e.charCodeAt(0).toString(16);return t.innerHTML='<h-char unicode="'+n+'" class="biaodian cjk '+o(e)+'">'+e+"</h-char>",t.firstChild}function o(e){return e.match(U.char.biaodian.open)?"bd-open":e.match(U.char.biaodian.close)?"bd-close bd-end":e.match(U.char.biaodian.end)?/(?:\u3001|\u3002|\uff0c)/i.test(e)?"bd-end bd-cop":"bd-end":e.match(new RegExp(q.biaodian.liga))?"bd-liga":e.match(new RegExp(q.biaodian.middle))?"bd-middle":""}function a(e,t){var n=we.create("canvas"),r;return n.width="50",n.height="20",n.style.display="none",O.appendChild(n),(r=n.getContext("2d")).textBaseline="top",r.font="15px "+t+", sans-serif",r.fillStyle="black",r.strokeStyle="black",r.fillText(e,0,0),{node:n,context:r,remove:function(){we.remove(n,O)}}}function c(e,t){var n,r=e.context,i=t.context;try{for(var o=1;o<=20;o++)for(var a=1;a<=50;a++){if(void 0===n&&r.getImageData(a,o,1,1).data[3]!==i.getImageData(a,o,1,1).data[3]){n=!1;break}if("boolean"==typeof n)break;50===a&&20===o&&void 0===n&&(n=!0)}return e.remove(),t.remove(),e=null,t=null,n}catch(e){}return!1}function s(e,t,n){var e=e,t,n,r;return t=a(n=n||"辭Q",t=t||"sans-serif"),!c(e=a(n,e),t)}function u(e){var t=we.create("!"),n=e.classList,r,i;return t.appendChild(we.clone(e)),we.tag("rt",t.firstChild).forEach((function(e){var t=we.create("!"),r=[],o;do{if(!(o=(o||e).previousSibling)||o.nodeName.match(/((?:h\-)?r[ubt])/i))break;t.insertBefore(we.clone(o),t.firstChild),r.push(o)}while(!o.nodeName.match(/((?:h\-)?r[ubt])/i));i=n.contains("zhuyin")?g(t,e):p(t,e);try{e.parentNode.replaceChild(i,e),r.map(we.remove)}catch(e){}})),h(t)}function d(e){var t=we.create("!");return t.appendChild(we.clone(e)),we.tag("rt",t.firstChild).forEach((function(e){var t=we.create("!"),n=[],r,i;do{if(!(r=(r||e).previousSibling)||r.nodeName.match(/((?:h\-)?r[ubt])/i))break;t.insertBefore(we.clone(r),t.firstChild),n.push(r)}while(!r.nodeName.match(/((?:h\-)?r[ubt])/i));(i=we.create("rt")).innerHTML=v(e),e.parentNode.replaceChild(i,e)})),t.firstChild}function l(e){var t=we.create("!"),n=e.classList,r,i,o,a,c;return t.appendChild(we.clone(e)),r=t.firstChild,i=o=we.tag("rb",r),a=i.length,(c=r.querySelector("rtc.zhuyin"))&&(o=we.tag("rt",c).map((function(e,t){if(i[t]){var n=g(i[t],e);try{i[t].parentNode.replaceChild(n,i[t])}catch(e){}return n}})),we.remove(c),r.setAttribute("rightangle","true")),we.qsa("rtc:not(.zhuyin)",r).forEach((function(e,t){var i;i=we.tag("rt",e).map((function(e,r){var i=Number(e.getAttribute("rbspan")||1),c=0,s=[],u,d;i>a&&(i=a);do{try{u=o.shift(),s.push(u)}catch(e){}if(void 0===u)break;c+=Number(u.getAttribute("span")||1)}while(i>c);if(i<c){if(s.length>1)return;s=we.tag("rb",s[0]),o=s.slice(i).concat(o),s=s.slice(0,i),c=i}d=p(s,e,{class:n,span:c,order:t});try{s[0].parentNode.replaceChild(d,s.shift()),s.map(we.remove)}catch(e){}return d})),o=i,1===t&&r.setAttribute("doubleline","true"),we.remove(e)})),h(t)}function h(e){var t=e.firstChild,n=we.create("h-ruby");return n.innerHTML=t.innerHTML,we.setAttr(n,t.attributes),n.normalize(),n}function f(e){if(!e instanceof Element)return e;var t=e.classList;return t.contains("pinyin")?t.add("romanization"):t.contains("romanization")?t.add("annotation"):t.contains("mps")?t.add("zhuyin"):t.contains("rightangle")&&t.add("complex"),e}function p(e,t,n){var r=we.create("h-ru"),t=we.clone(t),n;return(n=n||{}).annotation="true",Array.isArray(e)?r.innerHTML=e.map((function(e){return void 0===e?"":e.outerHTML})).join("")+t.outerHTML:(r.appendChild(we.clone(e)),r.appendChild(t)),we.setAttr(r,n),r}function g(e,t){var e=we.clone(e),n=we.create("h-ru");return n.setAttribute("zhuyin",!0),n.appendChild(e),n.innerHTML+=v(t),n}function v(e){var t="string"==typeof e?e:e.textContent,n,r,i;return i=(n=t.replace(U.zhuyin.diao,""))?n.length:0,r=t.replace(n,"").replace(/[\u02C5]/g,"ˇ").replace(/[\u030D\u0358]/g,"̇"),0===i?"":'<h-zhuyin length="'+i+'" diao="'+r+'"><h-yin>'+n+"</h-yin><h-diao>"+r+"</h-diao></h-zhuyin>"}function b(e,t){return e&&t&&e.parentNode===t.parentNode}function m(e,t){var n=e,t=t||"";if(we.isElmt(e.nextSibling)||b(e,e.nextSibling))return t+Le;for(;!n.nextSibling;)n=n.parentNode;return e!==n&&n.insertAdjacentHTML("afterEnd","<h-hws hidden> </h-hws>"),t}function y(e,t){return e.isEnd&&0===e.index?t[1]+Le+t[2]:0===e.index?m(e.node,e.text):e.text}function x(e){return 0===e.index?we.clone(ke):""}function w(e){var t=e.node.parentNode;return 0===e.index&&(ze=e.endIndexInNode-2),"h-hws"!==t.nodeName.toLowerCase()||1!==e.index&&e.indexInMatch!==ze||t.classList.add("quote-inner"),e.text}function E(e){var t=e.node.parentNode;return"h-hws"===t.nodeName.toLowerCase()&&t.classList.add("quote-outer"),e.text}function C(){var e=we.create("div"),t;return e.innerHTML="<span>a b</span><span style=\"font-family: 'Han Space'\">a b</span>",O.appendChild(e),t=e.firstChild.offsetWidth!==e.lastChild.offsetWidth,we.remove(e),t}function N(e){var t=e.nextSibling;t&&Ie(t,"h-cs.jinze-outer")?t.classList.add("hangable-outer"):e.insertAdjacentHTML("afterend",_e)}function T(e){return e.replace(/(biaodian|cjk|bd-jiya|bd-consecutive|bd-hangable)/gi,"").trim()}function S(e){var t=e.text,n=e.node.parentNode,r=we.parent(n,"h-char.biaodian"),i=B.createBDChar(t),o;return i.innerHTML="<h-inner>"+t+"</h-inner>",i.classList.add(je),(o=we.parent(n,"h-jinze"))&&k(o),r?(r.classList.add(je),Ie(n,"h-inner, h-inner *")?t:i.firstChild):i}function L(e){var t=He,n=e.node.parentNode,r=we.parent(n,"h-char.biaodian"),i=we.parent(r,"h-jinze"),o;return o=r.classList,t&&r.setAttribute("prev",t),De&&o.contains("bd-open")&&De.pop().setAttribute("next","bd-open"),De=void 0,e.isEnd?(He=void 0,o.add(Pe,"end-portion")):(He=T(r.getAttribute("class")),o.add(Pe)),i&&(De=z(i,{prev:t,class:T(r.getAttribute("class"))})),e.text}function k(e){Ie(e,".tou, .touwei")&&!Ie(e.previousSibling,"h-cs.jiya-outer")&&e.insertAdjacentHTML("beforebegin",Oe),Ie(e,".wei, .touwei")&&!Ie(e.nextSibling,"h-cs.jiya-outer")&&e.insertAdjacentHTML("afterend",Oe)}function z(e,t){var n,r;return Ie(e,".tou, .touwei")&&(n=e.previousSibling,Ie(n,"h-cs")&&(n.className="jinze-outer jiya-outer",n.setAttribute("prev",t.prev))),Ie(e,".wei, .touwei")&&(r=e.nextSibling,Ie(r,"h-cs")&&(r.className="jinze-outer jiya-outer "+t.class,r.removeAttribute("prev"))),[n,r]}function A(e,t,n){return function(){var r=B.localize.writeOnCanvas(t,e),i=B.localize.writeOnCanvas(n,e);return B.localize.compareCanvases(r,i)}}function M(){return A('"Romanization Sans"',"a̍","󰁡")}function _(){return A('"Romanization Sans"',"i̍","󰁩")}function I(){return A('"Zhuyin Kaiti"',"ㆴ̇","󳆴")}function j(e){return function(t){var t=t||R,n=B.find(t).avoid(Fe);return e.forEach((function(e){n.replace(new RegExp(e[0],"ig"),(function(t,n){var r=we.clone(qe);return r.innerHTML="<h-inner>"+n[0]+"</h-inner>",r.setAttribute("display-as",e[1]),0===t.index?r:""}))})),n}}var R=e.document,P=R.documentElement,O=R.body,H="3.3.0",D=["initCond","renderElem","renderJiya","renderHanging","correctBiaodian","renderHWS","substCombLigaWithPUA"],B=function(e,t){return new B.fn.init(e,t)},F=function(e,t){return e&&(this.context=e),t&&(this.condition=t),this};B.version="3.3.0",B.fn=B.prototype={version:"3.3.0",constructor:B,context:O,condition:P,routine:D,init:F,setRoutine:function(e){return Array.isArray(e)&&(this.routine=e),this},render:function(e){var t=this,e;return(e=Array.isArray(e)?e:this.routine).forEach((function(e){"string"==typeof e&&"function"==typeof t[e]?t[e]():Array.isArray(e)&&"function"==typeof t[e[0]]&&t[e.shift()].apply(t,e)})),this}},B.fn.init.prototype=B.fn,B.init=function(){return B.init=B().render()};var q={punct:{base:"[…,.;:!?‽_]",sing:"[‐-—…]",middle:"[\\/~\\-&‐-—_]",open:"['\"‘“\\(\\[¡¿⸘«‹‚“„]",close:"['\"”’\\)\\]»›‛”‟]",end:"['\"”’\\)\\]»›‛”‟‼‽⁇-⁉,.;:!?]"},biaodian:{base:"[︰．、，。：；？！ー]",liga:"[—…⋯]",middle:"[·＼／－゠＆・＿]",open:"[「『《〈（〔［｛【〖]",close:"[」』》〉）〕］｝】〗]",end:"[」』》〉）〕］｝】〗︰．、，。：；？！ー]"},hanzi:{base:"[一-鿿㐀-䶵㇀-㇣〇﨎﨏﨑﨓﨔﨟﨡﨣﨤﨧-﨩]|[\ud800-\udbff][\udc00-\udfff]",desc:"[⿰-⿺]",radical:"[⼀-⿕⺀-⻳]"},latin:{base:"[A-Za-z0-9À-ÿĀ-ſƀ-ɏⱠ-Ɀ꜠-ꟿḀ-ỿ]",combine:"[̀-́᷀-᷿]"},ellinika:{base:"[0-9Ͱ-Ͽἀ-῿]",combine:"[̀-᷀ͅ-᷿]"},kirillica:{base:"[0-9Ѐ-҂Ҋ-ӿԀ-ԯꙀ-ꙮ꙾-ꚗ]",combine:"[҃-҉ⷠ-ⷿ꙯-꙽ꚟ]"},kana:{base:"[アイウエオ-ヺあいうえお-ゔゟヿ]|\ud82c[\udc00-\udc01]",small:"[ぁぃぅぇぉァィゥェォっゃゅょゎゕゖッャュョヮヵヶㇰ-ㇿ]",combine:"[゙-゜]",half:"[ｦ-ﾟ]",mark:"[゠ゝゞ・-ヾ]"},eonmun:{base:"[가-힣]",letter:"[ᄀ-ᇿㅏ-ㅣㄱ-ㆎꥠ-ꥼힰ-ퟻ]",half:"[ﾡ-ￜ]"},zhuyin:{base:"[ㄅ-ㄭㆠ-ㆺ]",initial:"[ㄅ-ㄙㄪ-ㄬㆠ-ㆣ]",medial:"[ㄧ-ㄩ]",final:"[ㄚ-ㄩㄭㆤ-ㆳㆸ-ㆺ]",tone:"[˙ˊ˅ˇˋ˪˫]",checked:"[ㆴ-ㆷ][̇̍͘]?"}},U=(Y="[\\x20\\t\\r\\n\\f]",W=q.punct.open,V=q.punct.close,Z=q.punct.end,$=q.punct.middle,J=q.punct.sing,G=W+"|"+Z+"|"+$,K=q.biaodian.open,Q=q.biaodian.close,X=q.biaodian.end,ee=q.biaodian.middle,te=q.biaodian.liga+"{2}",ne=K+"|"+X+"|"+ee,re=q.kana.base+q.kana.combine+"?",ie=q.kana.small+q.kana.combine+"?",oe=q.kana.half,ae=q.eonmun.base+"|"+q.eonmun.letter,ce=q.eonmun.half,se=q.hanzi.base+"|"+q.hanzi.desc+"|"+q.hanzi.radical+"|"+re,ue=q.ellinika.combine,de=q.latin.base+ue+"*",le=q.ellinika.base+ue+"*",he=q.kirillica.combine,fe=q.kirillica.base+he+"*",ve=se+"|(?:"+(pe=de+"|"+le+"|"+fe)+"|['’])+",be=q.zhuyin.initial,me=q.zhuyin.medial,ye=q.zhuyin.final,xe=q.zhuyin.tone+"|"+q.zhuyin.checked,{char:{punct:{all:new RegExp("("+G+")","g"),open:new RegExp("("+W+")","g"),end:new RegExp("("+Z+")","g"),sing:new RegExp("("+J+")","g")},biaodian:{all:new RegExp("("+ne+")","g"),open:new RegExp("("+K+")","g"),close:new RegExp("("+Q+")","g"),end:new RegExp("("+X+")","g"),liga:new RegExp("("+te+")","g")},hanzi:new RegExp("("+se+")","g"),latin:new RegExp("("+de+")","ig"),ellinika:new RegExp("("+le+")","ig"),kirillica:new RegExp("("+fe+")","ig"),kana:new RegExp("("+re+"|"+ie+"|"+oe+")","g"),eonmun:new RegExp("("+ae+"|"+ce+")","g")},group:{biaodian:[new RegExp("(("+ne+"){2,})","g"),new RegExp("("+te+K+")","g")],punct:null,hanzi:new RegExp("("+se+")+","g"),western:new RegExp("("+de+"|"+le+"|"+fe+"|"+G+")+","ig"),kana:new RegExp("("+re+"|"+ie+"|"+oe+")+","g"),eonmun:new RegExp("("+ae+"|"+ce+"|"+G+")+","g")},jinze:{hanging:new RegExp(Y+"*([、，。．])(?!"+X+")","ig"),touwei:new RegExp("("+K+"+)("+ve+")("+X+"+)","ig"),tou:new RegExp("("+K+"+)("+ve+")","ig"),wei:new RegExp("("+ve+")("+X+"+)","ig"),middle:new RegExp("("+ve+")("+ee+")("+ve+")","ig")},zhuyin:{form:new RegExp("^˙?("+be+")?("+me+")?("+ye+")?("+xe+")?$"),diao:new RegExp("("+xe+")","g")},hws:{base:[new RegExp("("+se+")("+pe+"|"+W+")","ig"),new RegExp("("+pe+"|"+Z+")("+se+")","ig")],strict:[new RegExp("("+se+")"+Y+"?("+pe+"|"+W+")","ig"),new RegExp("("+pe+"|"+Z+")"+Y+"?("+se+")","ig")]},"display-as":{"ja-font-for-hant":["查 査","啟 啓","鄉 鄕","值 値","污 汚"],"comb-liga-pua":[["a[̍͘]","󰁡"],["e[̍͘]","󰁥"],["i[̍͘]","󰁩"],["o[̍͘]","󰁯"],["u[̍͘]","󰁵"],["ㆴ[̇̍͘]","󳆴"],["ㆵ[̇̍͘]","󳆵"],["ㆶ[̇̍͘]","󳆶"],["ㆷ[̇̍͘]","󳆷"]],"comb-liga-vowel":[["a[̍͘]","󰁡"],["e[̍͘]","󰁥"],["i[̍͘]","󰁩"],["o[̍͘]","󰁯"],["u[̍͘]","󰁵"]],"comb-liga-zhuyin":[["ㆴ[̇̍͘]","󳆴"],["ㆵ[̇̍͘]","󳆵"],["ㆶ[̇̍͘]","󳆶"],["ㆷ[̇̍͘]","󳆷"]]},"inaccurate-char":[["[•‧]","·"],["⋯⋯","……"],["──","——"],["‵","‘"],["′","’"],["‶","“"],["″","”"]]}),Y,W,V,Z,$,J,G,K,Q,X,ee,te,ne,re,ie,oe,ae,ce,se,ue,de,le,he,fe,pe,ge,ve,be,me,ye,xe;B.UNICODE=q,B.TYPESET=U,B.UNICODE.cjk=B.UNICODE.hanzi,B.UNICODE.greek=B.UNICODE.ellinika,B.UNICODE.cyrillic=B.UNICODE.kirillica,B.UNICODE.hangul=B.UNICODE.eonmun,B.UNICODE.zhuyin.ruyun=B.UNICODE.zhuyin.checked,B.TYPESET.char.cjk=B.TYPESET.char.hanzi,B.TYPESET.char.greek=B.TYPESET.char.ellinika,B.TYPESET.char.cyrillic=B.TYPESET.char.kirillica,B.TYPESET.char.hangul=B.TYPESET.char.eonmun,B.TYPESET.group.hangul=B.TYPESET.group.eonmun,B.TYPESET.group.cjk=B.TYPESET.group.hanzi;var we={id:function(e,t){return(t||R).getElementById(e)},tag:function(e,t){return this.makeArray((t||R).getElementsByTagName(e))},qs:function(e,t){return(t||R).querySelector(e)},qsa:function(e,t){return this.makeArray((t||R).querySelectorAll(e))},parent:function(e,t){return t?function(){if("function"==typeof we.matches){for(;!we.matches(e,t);){if(!e||e===R.documentElement){e=void 0;break}e=e.parentNode}return e}}():e?e.parentNode:void 0},create:function(e,t){var n="!"===e?R.createDocumentFragment():""===e?R.createTextNode(t||""):R.createElement(e);try{t&&(n.className=t)}catch(e){}return n},clone:function(e,t){return e.cloneNode("boolean"!=typeof t||t)},remove:function(e){return e.parentNode.removeChild(e)},setAttr:function(e,t){if("object"==typeof t){var n=t.length;if("object"==typeof t[0]&&"name"in t[0])for(var r=0;r<n;r++)void 0!==t[r].value&&e.setAttribute(t[r].name,t[r].value);else for(var i in t)t.hasOwnProperty(i)&&void 0!==t[i]&&e.setAttribute(i,t[i]);return e}},isElmt:function(e){return e&&e.nodeType===Node.ELEMENT_NODE},isIgnorable:function(e){return!!e&&("WBR"===e.nodeName||e.nodeType===Node.COMMENT_NODE)},makeArray:function(e){return Array.prototype.slice.call(e)},extend:function(e,t){if(("object"==typeof e||"function"==typeof e)&&"object"==typeof t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}},Ee=function(t){function n(e,t,n){var r=Element.prototype,i=r.matches||r.mozMatchesSelector||r.msMatchesSelector||r.webkitMatchesSelector;return e instanceof Element?i.call(e,t):!(!n||!/^[39]$/.test(e.nodeType))}var r="0.2.1",i=t.NON_INLINE_PROSE,o=t.PRESETS.prose.filterElements,a,c=(e||{}).document||void 0;if(void 0===c)throw new Error("Fibre requires a DOM-supported environment.");var s=function(e,t){return new s.fn.init(e,t)};return s.version="0.2.1",s.matches=n,s.fn=s.prototype={constructor:s,version:"0.2.1",finder:[],context:void 0,portionMode:"retain",selector:{},preset:"prose",init:function(e,t){if(t&&(this.preset=null),this.selector={context:null,filter:[],avoid:[],boundary:[]},!e)throw new Error("A context is required for Fibre to initialise.");return e instanceof Node?e instanceof Document?this.context=e.body||e:this.context=e:"string"==typeof e&&(this.context=c.querySelector(e),this.selector.context=e),this},filterFn:function(e){var t=this.selector.filter.join(", ")||"*",r=this.selector.avoid.join(", ")||null,i=n(e,t,!0)&&!n(e,r);return"prose"===this.preset?o(e)&&i:i},boundaryFn:function(e){var t,r=n(e,this.selector.boundary.join(", ")||null);return"prose"===this.preset&&i(e)||r},filter:function(e){return"string"==typeof e&&this.selector.filter.push(e),this},endFilter:function(e){return e?this.selector.filter=[]:this.selector.filter.pop(),this},avoid:function(e){return"string"==typeof e&&this.selector.avoid.push(e),this},endAvoid:function(e){return e?this.selector.avoid=[]:this.selector.avoid.pop(),this},addBoundary:function(e){return"string"==typeof e&&this.selector.boundary.push(e),this},removeBoundary:function(){return this.selector.boundary=[],this},setMode:function(e){return this.portionMode="first"===e?"first":"retain",this},replace:function(e,n){var r=this;return r.finder.push(t(r.context,{find:e,replace:n,filterElements:function(e){return r.filterFn(e)},forceContext:function(e){return r.boundaryFn(e)},portionMode:r.portionMode})),r},wrap:function(e,n){var r=this;return r.finder.push(t(r.context,{find:e,wrap:n,filterElements:function(e){return r.filterFn(e)},forceContext:function(e){return r.boundaryFn(e)},portionMode:r.portionMode})),r},revert:function(e){var t=this.finder.length,e=Number(e)||(0===e?Number(0):"all"===e?t:1);if(void 0===t||0===t)return this;e>t&&(e=t);for(var n=e;n>0;n--)this.finder.pop().revert();return this}},s.fn.filterOut=s.fn.avoid,s.fn.init.prototype=s.fn,s}(function(){function e(e){return"[object Array]"==u.call(e)}function t(e){return String(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function n(){return r.apply(null,arguments)||i.apply(null,arguments)}function r(e,t,r,o,a){if(t&&!t.nodeType&&arguments.length<=2)return!1;var c="function"==typeof r,s;c&&(s=r,r=function(e,t){return s(e.text,t.startIndex)});var u=i(t,{find:e,wrap:c?null:r,replace:c?r:"$"+(o||"&"),prepMatch:function(e,t){if(!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";if(o>0){var n=e[o];e.index+=e[0].indexOf(n),e[0]=n}return e.endIndex=e.index+e[0].length,e.startIndex=e.index,e.index=t,e},filterElements:a});return n.revert=function(){return u.revert()},!0}function i(e,t){return new o(e,t)}function o(e,t){var r=t.preset&&n.PRESETS[t.preset];if(t.portionMode=t.portionMode||a,r)for(var i in r)d.call(r,i)&&!d.call(t,i)&&(t[i]=r[i]);this.node=e,this.options=t,this.prepMatch=t.prepMatch||this.prepMatch,this.reverts=[],this.matches=this.search(),this.matches.length&&this.processMatches()}var a="retain",c="first",s=R,u={}.toString,d={}.hasOwnProperty;return n.NON_PROSE_ELEMENTS={br:1,hr:1,script:1,style:1,img:1,video:1,audio:1,canvas:1,svg:1,map:1,object:1,input:1,textarea:1,select:1,option:1,optgroup:1,button:1},n.NON_CONTIGUOUS_PROSE_ELEMENTS={address:1,article:1,aside:1,blockquote:1,dd:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,nav:1,noscript:1,ol:1,output:1,p:1,pre:1,section:1,ul:1,br:1,li:1,summary:1,dt:1,details:1,rp:1,rt:1,rtc:1,script:1,style:1,img:1,video:1,audio:1,canvas:1,svg:1,map:1,object:1,input:1,textarea:1,select:1,option:1,optgroup:1,button:1,table:1,tbody:1,thead:1,th:1,tr:1,td:1,caption:1,col:1,tfoot:1,colgroup:1},n.NON_INLINE_PROSE=function(e){return d.call(n.NON_CONTIGUOUS_PROSE_ELEMENTS,e.nodeName.toLowerCase())},n.PRESETS={prose:{forceContext:n.NON_INLINE_PROSE,filterElements:function(e){return!d.call(n.NON_PROSE_ELEMENTS,e.nodeName.toLowerCase())}}},n.Finder=o,o.prototype={search:function(){function e(t){for(var a=0,u=t.length;a<u;++a){var d=t[a];if("string"==typeof d){if(o.global)for(;n=o.exec(d);)c.push(s.prepMatch(n,r++,i));else(n=d.match(o))&&c.push(s.prepMatch(n,0,i));i+=d.length}else e(d)}}var n,r=0,i=0,o=this.options.find,a=this.getAggregateText(),c=[],s=this;return o="string"==typeof o?RegExp(t(o),"g"):o,e(a),c},prepMatch:function(e,t,n){if(!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return e.endIndex=n+e.index+e[0].length,e.startIndex=n+e.index,e.index=t,e},getAggregateText:function(){function e(r,i){if(3===r.nodeType)return[r.data];if(t&&!t(r))return[];var i=[""],o=0;if(r=r.firstChild)do{if(3!==r.nodeType){var a=e(r);n&&1===r.nodeType&&(!0===n||n(r))?(i[++o]=a,i[++o]=""):("string"==typeof a[0]&&(i[o]+=a.shift()),a.length&&(i[++o]=a,i[++o]=""))}else i[o]+=r.data}while(r=r.nextSibling);return i}var t=this.options.filterElements,n=this.options.forceContext;return e(this.node)},processMatches:function(){var e=this.matches,t=this.node,n=this.options.filterElements,r,i,o=[],a=t,c=e.shift(),s=0,u=0,d=0,l,h=[t];e:for(;;){if(3===a.nodeType&&(!i&&a.length+s>=c.endIndex?i={node:a,index:d++,text:a.data.substring(c.startIndex-s,c.endIndex-s),indexInMatch:s-c.startIndex,indexInNode:c.startIndex-s,endIndexInNode:c.endIndex-s,isEnd:!0}:r&&o.push({node:a,index:d++,text:a.data,indexInMatch:s-c.startIndex,indexInNode:0}),!r&&a.length+s>c.startIndex&&(r={node:a,index:d++,indexInMatch:0,indexInNode:c.startIndex-s,endIndexInNode:c.endIndex-s,text:a.data.substring(c.startIndex-s,c.endIndex-s)}),s+=a.data.length),l=1===a.nodeType&&n&&!n(a),r&&i){if(a=this.replaceMatch(c,r,o,i),s-=i.node.data.length-i.endIndexInNode,r=null,i=null,o=[],d=0,u++,!(c=e.shift()))break}else if(!l&&(a.firstChild||a.nextSibling)){a.firstChild?(h.push(a),a=a.firstChild):a=a.nextSibling;continue}for(;;){if(a.nextSibling){a=a.nextSibling;break}if((a=h.pop())===t)break e}}},revert:function(){for(var e=this.reverts.length;e--;)this.reverts[e]();this.reverts=[]},prepareReplacementString:function(e,t,n,r){var i=this.options.portionMode;return"first"===i&&t.indexInMatch>0?"":(e=e.replace(/\$(\d+|&|`|')/g,(function(e,t){var r;switch(t){case"&":r=n[0];break;case"`":r=n.input.substring(0,n.startIndex);break;case"'":r=n.input.substring(n.endIndex);break;default:r=n[+t]}return r})),"first"===i?e:t.isEnd?e.substring(t.indexInMatch):e.substring(t.indexInMatch,t.indexInMatch+t.text.length))},getPortionReplacementNode:function(e,t,n){var r=this.options.replace||"$&",i=this.options.wrap;if(i&&i.nodeType){var o=s.createElement("div");o.innerHTML=i.outerHTML||(new XMLSerializer).serializeToString(i),i=o.firstChild}if("function"==typeof r)return(r=r(e,t,n))&&r.nodeType?r:s.createTextNode(String(r));var a="string"==typeof i?s.createElement(i):i;return(r=s.createTextNode(this.prepareReplacementString(r,e,t,n))).data&&a?(a.appendChild(r),a):r},replaceMatch:function(e,t,n,r){var i=t.node,o=r.node,a,c;if(i===o){var u=i;t.indexInNode>0&&(a=s.createTextNode(u.data.substring(0,t.indexInNode)),u.parentNode.insertBefore(a,u));var d=this.getPortionReplacementNode(r,e);return u.parentNode.insertBefore(d,u),r.endIndexInNode<u.length&&(c=s.createTextNode(u.data.substring(r.endIndexInNode)),u.parentNode.insertBefore(c,u)),u.parentNode.removeChild(u),this.reverts.push((function(){a===d.previousSibling&&a.parentNode.removeChild(a),c===d.nextSibling&&c.parentNode.removeChild(c),d.parentNode.replaceChild(u,d)})),d}a=s.createTextNode(i.data.substring(0,t.indexInNode)),c=s.createTextNode(o.data.substring(r.endIndexInNode));for(var l=this.getPortionReplacementNode(t,e),h=[],f=0,p=n.length;f<p;++f){var g=n[f],v=this.getPortionReplacementNode(g,e);g.node.parentNode.replaceChild(v,g.node),this.reverts.push(function(e,t){return function(){t.parentNode.replaceChild(e.node,t)}}(g,v)),h.push(v)}var b=this.getPortionReplacementNode(r,e);return i.parentNode.insertBefore(a,i),i.parentNode.insertBefore(l,i),i.parentNode.removeChild(i),o.parentNode.insertBefore(b,o),o.parentNode.insertBefore(c,o),o.parentNode.removeChild(o),this.reverts.push((function(){a.parentNode.removeChild(a),l.parentNode.replaceChild(i,l),c.parentNode.removeChild(c),b.parentNode.replaceChild(o,b)})),b}},n}()),Ce=((Ne=we.create("div")).appendChild(we.create("","0-")),Ne.appendChild(we.create("","2")),Ne.normalize(),2!==Ne.firstChild.length),Ne;we.extend(Ee.fn,{normalize:function(){return Ce&&this.context.normalize(),this},jinzify:function(e){return this.filter(e||null).avoid("h-jinze").replace(U.jinze.touwei,(function(e,t){var n=we.create("h-jinze","touwei");return n.innerHTML=t[0],0===e.index&&e.isEnd||1===e.index?n:""})).replace(U.jinze.wei,(function(e,t){var n=we.create("h-jinze","wei");return n.innerHTML=t[0],0===e.index?n:""})).replace(U.jinze.tou,(function(e,t){var n=we.create("h-jinze","tou");return n.innerHTML=t[0],0===e.index&&e.isEnd||1===e.index?n:""})).replace(U.jinze.middle,(function(e,t){var n=we.create("h-jinze","middle");return n.innerHTML=t[0],0===e.index&&e.isEnd||1===e.index?n:""})).endAvoid().endFilter()},groupify:function(e){var e=we.extend({biaodian:!1,hanzi:!1,kana:!1,eonmun:!1,western:!1},e||{});return this.avoid("h-word, h-char-group"),e.biaodian&&this.replace(U.group.biaodian[0],r).replace(U.group.biaodian[1],r),(e.hanzi||e.cjk)&&this.wrap(U.group.hanzi,we.clone(we.create("h-char-group","hanzi cjk"))),e.western&&this.wrap(U.group.western,we.clone(we.create("h-word","western"))),e.kana&&this.wrap(U.group.kana,we.clone(we.create("h-char-group","kana"))),(e.eonmun||e.hangul)&&this.wrap(U.group.eonmun,we.clone(we.create("h-word","eonmun hangul"))),this.endAvoid(),this},charify:function(e){var e;return(e=we.extend({avoid:!0,biaodian:!1,punct:!1,hanzi:!1,latin:!1,ellinika:!1,kirillica:!1,kana:!1,eonmun:!1},e||{})).avoid&&this.avoid("h-char"),e.biaodian&&this.replace(U.char.biaodian.all,n(e.biaodian)||function(e){return i(e.text)}).replace(U.char.biaodian.liga,n(e.biaodian)||function(e){return i(e.text)}),(e.hanzi||e.cjk)&&this.wrap(U.char.hanzi,n(e.hanzi||e.cjk)||we.clone(we.create("h-char","hanzi cjk"))),e.punct&&this.wrap(U.char.punct.all,n(e.punct)||we.clone(we.create("h-char","punct"))),e.latin&&this.wrap(U.char.latin,n(e.latin)||we.clone(we.create("h-char","alphabet latin"))),(e.ellinika||e.greek)&&this.wrap(U.char.ellinika,n(e.ellinika||e.greek)||we.clone(we.create("h-char","alphabet ellinika greek"))),(e.kirillica||e.cyrillic)&&this.wrap(U.char.kirillica,n(e.kirillica||e.cyrillic)||we.clone(we.create("h-char","alphabet kirillica cyrillic"))),e.kana&&this.wrap(U.char.kana,n(e.kana)||we.clone(we.create("h-char","kana"))),(e.eonmun||e.hangul)&&this.wrap(U.char.eonmun,n(e.eonmun||e.hangul)||we.clone(we.create("h-char","eonmun hangul"))),this.endAvoid(),this}}),we.extend(B,{isNodeNormalizeNormal:Ce,find:Ee,createBDGroup:r,createBDChar:i}),we.matches=B.find.matches,
["setMode","wrap","replace","revert","addBoundary","removeBoundary","avoid","endAvoid","filter","endFilter","jinzify","groupify","charify"].forEach((function(e){B.fn[e]=function(t,n){return this.finder||(this.finder=B.find(this.context)),this.finder[e](t,n),this}}));var Te={};Te.writeOnCanvas=a,Te.compareCanvases=c,Te.detectFont=s,Te.support=function(){function t(e){var t=e.charAt(0).toUpperCase()+e.slice(1),n,r;return(e+" "+i.join(t+" ")+t).split(" ").forEach((function(e){"string"==typeof o.style[e]&&(r=!0)})),r||!1}function n(e,t){var n=O||we.create("body"),r=we.create("div"),i=O?r:n,t="function"==typeof t?t:function(){},o,a,c;return o=["<style>",e,"</style>"].join(""),i.innerHTML+=o,n.appendChild(r),O||(n.style.background="",n.style.overflow="hidden",c=P.style.overflow,P.style.overflow="hidden",P.appendChild(n)),a=t(i,e),we.remove(i),O||(P.style.overflow=c),!!a}function r(t,n){var r;return e.getComputedStyle?r=R.defaultView.getComputedStyle(t,null).getPropertyValue(n):t.currentStyle&&(r=t.currentStyle[n]),r}var i="Webkit Moz ms".split(" "),o=we.create("h-test"),a;return{columnwidth:t("columnWidth"),fontface:(n('@font-face { font-family: font; src: url("//"); }',(function(e,t){var n=we.qsa("style",e)[0],r=n.sheet||n.styleSheet,i=r?r.cssRules&&r.cssRules[0]?r.cssRules[0].cssText:r.cssText||"":"";a=/src/i.test(i)&&0===i.indexOf(t.split(" ")[0])})),a),ruby:function(){var e=we.create("ruby"),t=we.create("rt"),n=we.create("rp"),i;return e.appendChild(n),e.appendChild(t),P.appendChild(e),i="none"===r(n,"display")||"ruby"===r(e,"display")&&"ruby-text"===r(t,"display"),P.removeChild(e),e=null,t=null,n=null,i}(),"ruby-display":function(){var e=we.create("div");return e.innerHTML='<h-test-a style="display: ruby;"></h-test-a><h-test-b style="display: ruby-text-container;"></h-test-b>',"ruby"===e.querySelector("h-test-a").style.display&&"ruby-text-container"===e.querySelector("h-test-b").style.display}(),"ruby-interchar":function(){var e="inter-character",t=we.create("div"),n;return t.innerHTML='<h-test style="-moz-ruby-position:'+e+";-ms-ruby-position:"+e+";-webkit-ruby-position:"+e+";ruby-position:"+e+';"></h-test>',(n=t.querySelector("h-test").style).rubyPosition===e||n.WebkitRubyPosition===e||n.MozRubyPosition===e||n.msRubyPosition===e}(),textemphasis:t("textEmphasis"),unicoderange:function(){var e;return n('@font-face{font-family:test-for-unicode-range;src:local(Arial),local("Droid Sans")}@font-face{font-family:test-for-unicode-range;src:local("Times New Roman"),local(Times),local("Droid Serif");unicode-range:U+270C}',(function(){e=!Te.detectFont("test-for-unicode-range",'Arial, "Droid Sans"',"Q")})),e}(),writingmode:t("writingMode")}}(),Te.initCond=function(e){var e=e||P,t="",n;for(var r in Te.support)n=(Te.support[r]?"":"no-")+r,e.classList.add(n),t+=n+" ";return t};var Se=Te.support["ruby-interchar"];we.extend(Te,{renderRuby:function(e,t){var t=t||"ruby",n=we.qsa(t,e);we.qsa("rtc",e).concat(n).map(f),n.forEach((function(e){var t=e.classList,n;t.contains("complex")?n=l(e):t.contains("zhuyin")&&(n=Se?d(e):u(e)),n&&e.parentNode.replaceChild(n,e)}))},simplifyRubyClass:f,getZhuyinHTML:v,renderComplexRuby:l,renderSimpleRuby:u,renderInterCharRuby:d}),we.extend(Te,{renderElem:function(e){this.renderRuby(e),this.renderDecoLine(e),this.renderDecoLine(e,"s, del"),this.renderEm(e)},renderDecoLine:function(e,t){var n=we.qsa(t||"u, ins",e),r=n.length;e:for(;r--;){var i=n[r],o=null;do{if(!(o=(o||i).previousSibling))continue e;n[r-1]===o&&i.classList.add("adjacent")}while(we.isIgnorable(o))}},renderEm:function(e,t){var n=t?"qsa":"tag",t=t||"em",r;we[n](t,e).forEach((function(e){var t=B(e);Te.support.textemphasis?t.avoid("rt, h-char").charify({biaodian:!0,punct:!0}):t.avoid("rt, h-char, h-char-group").jinzify().groupify({western:!0}).charify({hanzi:!0,biaodian:!0,punct:!0,latin:!0,ellinika:!0,kirillica:!0})}))}}),B.normalize=Te,B.localize=Te,B.support=Te.support,B.detectFont=Te.detectFont,B.fn.initCond=function(){return this.condition.classList.add("han-js-rendered"),B.normalize.initCond(this.condition),this},["Elem","DecoLine","Em","Ruby"].forEach((function(e){var t="render"+e;B.fn[t]=function(e){return B.normalize[t](this.context,e),this}})),we.extend(B.support,{heiti:!0,songti:B.detectFont('"Han Songti"'),"songti-gb":B.detectFont('"Han Songti GB"'),kaiti:B.detectFont('"Han Kaiti"'),fangsong:B.detectFont('"Han Fangsong"')}),B.correctBiaodian=function(e){var e=e||R,t=B.find(e);return t.avoid("h-char").replace(/([‘“])/g,(function(e){var t=B.createBDChar(e.text);return t.classList.add("bd-open","punct"),t})).replace(/([’”])/g,(function(e){var t=B.createBDChar(e.text);return t.classList.add("bd-close","bd-end","punct"),t})),B.support.unicoderange?t:t.charify({biaodian:!0})},B.correctBasicBD=B.correctBiaodian,B.correctBD=B.correctBiaodian,we.extend(B.fn,{biaodian:null,correctBiaodian:function(){return this.biaodian=B.correctBiaodian(this.context),this},revertCorrectedBiaodian:function(){try{this.biaodian.revert("all")}catch(e){}return this}}),B.fn.correctBasicBD=B.fn.correctBiaodian,B.fn.revertBasicBD=B.fn.revertCorrectedBiaodian;var Le="<<hws>>",ke=we.create("h-hws"),ze;ke.setAttribute("hidden",""),ke.innerHTML=" ",we.extend(B,{renderHWS:function(e,t){var n=t?"textarea, code, kbd, samp, pre":"textarea",r=t?"strict":"base",e=e||R,i=B.find(e);return i.avoid(n).replace(B.TYPESET.hws[r][0],y).replace(B.TYPESET.hws[r][1],y).replace(new RegExp("("+Le+")+","g"),x).replace(/([\'"])\s(.+?)\s\1/g,w).replace(/\s[‘“]/g,E).replace(/[’”]\s/g,E).normalize(),i}}),we.extend(B.fn,{renderHWS:function(e){return B.renderHWS(this.context,e),this},revertHWS:function(){return we.tag("h-hws",this.context).forEach((function(e){we.remove(e)})),this.HWS=[],this}});var Ae="bd-hangable",Me="h-char.bd-hangable",_e='<h-cs hidden class="jinze-outer hangable-outer"> </h-cs>',Ie=B.find.matches;B.support["han-space"]=C(),we.extend(B,{detectSpaceFont:C,isSpaceFontLoaded:C(),renderHanging:function(e){var e=e||R,t=B.find(e);return t.avoid("textarea, code, kbd, samp, pre").avoid(Me).replace(U.jinze.hanging,(function(e){if(/^[\x20\t\r\n\f]+$/.test(e.text))return"";var t=e.node.parentNode,n,r,i,o;return(n=we.parent(t,"h-jinze"))&&N(n),o=e.text.trim(),(r=B.createBDChar(o)).innerHTML="<h-inner>"+o+"</h-inner>",r.classList.add("bd-hangable"),(i=we.parent(t,"h-char.biaodian"))?(i.classList.add("bd-hangable"),Ie(t,"h-inner, h-inner *")?o:r.firstChild):r})),t}}),we.extend(B.fn,{renderHanging:function(){var e=this.condition.classList;return B.isSpaceFontLoaded=C(),B.isSpaceFontLoaded&&e.contains("no-han-space")&&(e.remove("no-han-space"),e.add("han-space")),B.renderHanging(this.context),this},revertHanging:function(){return we.qsa("h-char.bd-hangable, h-cs.hangable-outer",this.context).forEach((function(e){var t=e.classList;t.remove("bd-hangable"),t.remove("hangable-outer")})),this}});var je="bd-jiya",Re="h-char.bd-jiya",Pe="bd-consecutive",Oe='<h-cs hidden class="jinze-outer jiya-outer"> </h-cs>',Ie=B.find.matches,He,De;B.renderJiya=function(e){var e=e||R,t=B.find(e);return t.avoid("textarea, code, kbd, samp, pre, h-cs").avoid(Re).charify({avoid:!1,biaodian:S}).endAvoid().avoid("textarea, code, kbd, samp, pre, h-cs").replace(U.group.biaodian[0],L).replace(U.group.biaodian[1],L),t},we.extend(B.fn,{renderJiya:function(){return B.renderJiya(this.context),this},revertJiya:function(){return we.qsa("h-char.bd-jiya, h-cs.jiya-outer",this.context).forEach((function(e){var t=e.classList;t.remove("bd-jiya"),t.remove("jiya-outer")})),this}});var Be="h-ru[annotation]",Fe="textarea, code, kbd, samp, pre",qe=we.create("h-char","comb-liga");return we.extend(B,{isVowelCombLigaNormal:M(),isVowelICombLigaNormal:_(),isZhuyinCombLigaNormal:I(),isCombLigaNormal:_()(),substVowelCombLiga:j(B.TYPESET["display-as"]["comb-liga-vowel"]),substZhuyinCombLiga:j(B.TYPESET["display-as"]["comb-liga-zhuyin"]),substCombLigaWithPUA:j(B.TYPESET["display-as"]["comb-liga-pua"]),substInaccurateChar:function(e){var e=e||R,t=B.find(e);t.avoid(Fe),B.TYPESET["inaccurate-char"].forEach((function(e){t.replace(new RegExp(e[0],"ig"),e[1])}))}}),we.extend(B.fn,{"comb-liga-vowel":null,"comb-liga-vowel-i":null,"comb-liga-zhuyin":null,"inaccurate-char":null,substVowelCombLiga:function(){return this["comb-liga-vowel"]=B.substVowelCombLiga(this.context),this},substVowelICombLiga:function(){return this["comb-liga-vowel-i"]=B.substVowelICombLiga(this.context),this},substZhuyinCombLiga:function(){return this["comb-liga-zhuyin"]=B.substZhuyinCombLiga(this.context),this},substCombLigaWithPUA:function(){return B.isVowelCombLigaNormal()?B.isVowelICombLigaNormal()||(this["comb-liga-vowel-i"]=B.substVowelICombLiga(this.context)):this["comb-liga-vowel"]=B.substVowelCombLiga(this.context),B.isZhuyinCombLigaNormal()||(this["comb-liga-zhuyin"]=B.substZhuyinCombLiga(this.context)),this},revertVowelCombLiga:function(){try{this["comb-liga-vowel"].revert("all")}catch(e){}return this},revertVowelICombLiga:function(){try{this["comb-liga-vowel-i"].revert("all")}catch(e){}return this},revertZhuyinCombLiga:function(){try{this["comb-liga-zhuyin"].revert("all")}catch(e){}return this},revertCombLigaWithPUA:function(){try{this["comb-liga-vowel"].revert("all"),this["comb-liga-vowel-i"].revert("all"),this["comb-liga-zhuyin"].revert("all")}catch(e){}return this},substInaccurateChar:function(){return this["inaccurate-char"]=B.substInaccurateChar(this.context),this},revertInaccurateChar:function(){try{this["inaccurate-char"].revert("all")}catch(e){}return this}}),e.addEventListener("DOMContentLoaded",(function(){var e;P.classList.contains("han-init")?B.init():(e=R.querySelector(".han-init-context"))&&(B.init=B(e).render())})),void 0!==t&&!1!==t||(e.Han=B),B}));