!function(){"use strict";function e(){for(var e=document,t=["iPhone","iPad","MQQBrowser","Android","MicroMessenger"],r=navigator.userAgent,i=e.getElementsByTagName("html")[0],n=0;n<t.length;n++){var o=new RegExp(t[n]);r.match(o)&&i.classList.add("ua-"+t[n])}-1!==r.indexOf("Safari")&&-1===r.indexOf("Chrome")&&i.classList.add("ua-Safari"),"ontouchstart"in window||i.classList.add("ua-Pointer"),e.getElementsByTagName("body")[0].addEventListener("touchstart",(function(){}),{passive:!0}),e.getElementsByTagName("main")[0].addEventListener("touchstart",(function(){}),{passive:!0})}function t(){var e=document,t=window;Han(e.querySelector(".article")).initCond().renderElem().renderHanging().renderJiya().renderHWS();var r=e.querySelector(".article-body"),i;r.addEventListener("click",(function(n){var o=(i=t.innerWidth||e.clientWidth||e.body.clientWidth)>480?32:28,a=n.offsetX,l=n.offsetY,s=r.offsetWidth,c=r.offsetHeight,d=r.querySelector("p").clientWidth;l<=c&&l>=c-o&&a>=(s-d)/2&&a<=s-(s-d)/2&&(t.location.href=e.querySelector("body").getAttribute("data-root"))}))}function r(){var e=document;Han(e.querySelector(".index-list")).initCond().renderElem().renderHanging().renderJiya().renderHWS();var t=function t(){for(var r=e.querySelectorAll(".index-item"),i=r.length,n=250,o=function e(t){setTimeout((function(){r[t].classList.remove("is-loading")}),250*(t+1))},a=0;a<i;a++)o(a)};e.addEventListener("readystatechange",t)}function i(){var e=document,t=window;Han(e.querySelector(".article")).initCond().renderElem().renderHanging().renderJiya().renderHWS();var r=896,i=e.querySelector(".article"),n=e.querySelector(".article-body"),o=e.querySelector(".article-footnote"),a=e.querySelectorAll(".article-footnote li"),l=e.querySelectorAll(".article-body .fn-mark"),s,c,d,f,y,u=function e(){s=i.offsetTop,c=n.offsetWidth,d=n.querySelector("p").offsetLeft,f=n.querySelector("p").offsetWidth,o.style.top=s+"px",o.style.right=c-d-f+"px",o.style.width="";for(var t=0;t<a.length;t++){var r=a[t],y,u=l[t].offsetTop;r.style.top=u+"px",r.style.left=r.style.right="",r.style.setProperty("--arrow-left","")}},h=function r(){s=i.offsetTop,c=n.offsetWidth,d=n.querySelector("p").offsetLeft,f=n.querySelector("p").offsetWidth,o.style.top=s+"px",o.style.right=c-d-f+"px",o.style.width=f+"px";var y=t.getComputedStyle(e.querySelector(".article-body p")).getPropertyValue("line-height");y=y.substring(0,y.length-2);for(var u=0;u<a.length;u++){var h=a[u],g=l[u],v=g.offsetTop,p=g.offsetLeft;h.style.top=v+parseInt(y,10)+"px",p<=c/2?(h.style.left="0px",h.style.right=""):(h.style.left="",h.style.right="0px");var m,S=p-(h.offsetLeft+(c-f)/2);h.style.setProperty("--arrow-left",S-2+"px")}};if(a.length>0&&l.length>0){t.addEventListener("load",(function(){(y=t.innerWidth||e.clientWidth||e.body.clientWidth)>896?u():h()})),t.addEventListener("resize",(function(){(y=t.innerWidth||e.clientWidth||e.body.clientWidth)>896?u():h()}));for(var g=function e(r){var i;l[r].addEventListener("click",(function(e){e.preventDefault(),y>896||a[r].classList.toggle("is-active");for(var i=e.target;i&&!i.matches(".article-body a.fn-mark, body");)i=i.parentNode;if(i&&i.matches(".article-body a.fn-mark")){var n="#"+i.getAttribute("id");n!==t.location.hash&&history.replaceState({},"",n)}}))},v=0;v<l.length;v++)g(v);e.addEventListener("click",(function(t){for(var r=t.target;r&&!r.matches(".article-footnote li.is-active, .fn-mark, body");)r=r.parentNode;if(!r||!r.matches(".article-footnote li.is-active, .fn-mark"))for(var i=e.querySelectorAll(".article-footnote li.is-active"),n=0;n<i.length;n++)i[n].classList.remove("is-active")}))}n.addEventListener("click",(function(r){var i=(y=t.innerWidth||e.clientWidth||e.body.clientWidth)>480?32:28,o=r.offsetX,a=r.offsetY,l=n.offsetWidth,s=n.offsetHeight,c=n.querySelector("p").clientWidth;a<=s&&a>=s-i&&o>=(l-c)/2&&o<=l-(l-c)/2&&(t.location.href=e.querySelector("body").getAttribute("data-root"))}))}var n=document,o;switch(e(),n.querySelector("body").classList[0]){case"http404":t();break;case"index":r();break;case"essay":i();break}}();