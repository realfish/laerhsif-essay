!function(){"use strict";function e(){for(var e=document,t=["iPhone","iPad","MQQBrowser","Android","MicroMessenger"],r=navigator.userAgent,i=e.getElementsByTagName("html")[0],o=0;o<t.length;o++){var n=new RegExp(t[o]);r.match(n)&&i.classList.add("ua-"+t[o])}-1!==r.indexOf("Safari")&&-1===r.indexOf("Chrome")&&i.classList.add("ua-Safari"),"ontouchstart"in window||i.classList.add("ua-Pointer"),e.getElementsByTagName("body")[0].addEventListener("touchstart",(function(){}),{passive:!0}),e.getElementsByTagName("main")[0].addEventListener("touchstart",(function(){}),{passive:!0})}function t(){var e=document,t=window;Han(e.querySelector(".article")).initCond().renderElem().renderHanging().renderJiya().renderHWS();var r=e.querySelector(".article-body"),i;r.addEventListener("click",(function(o){var n=(i=t.innerWidth||e.clientWidth||e.body.clientWidth)>480?32:28,a=o.offsetX,l=o.offsetY,c=r.offsetWidth,s=r.offsetHeight,d=r.querySelector("p").clientWidth;l<=s&&l>=s-n&&a>=(c-d)/2&&a<=c-(c-d)/2&&(t.location.href=e.querySelector("body").getAttribute("data-root"))}))}function r(){var e=document;Han(e.querySelector(".index-list")).initCond().renderElem().renderHanging().renderJiya().renderHWS()}function i(){var e=document,t=window;Han(e.querySelector(".article")).initCond().renderElem().renderHanging().renderJiya().renderHWS();var r=896,i=e.querySelector(".article"),o=e.querySelector(".article-body"),n=e.querySelector(".article-footnote"),a=e.querySelectorAll(".article-footnote li"),l=e.querySelectorAll(".article-body .fn-mark"),c,s,d,f,y,h=function e(){c=i.offsetTop,s=o.offsetWidth,d=o.querySelector("p").offsetLeft,f=o.querySelector("p").offsetWidth,n.style.top=c+"px",n.style.right=s-d-f+"px",n.style.width="";for(var t=0;t<a.length;t++){var r=a[t],y,h=l[t].offsetTop;r.style.top=h+"px",r.style.left=r.style.right="",r.style.setProperty("--arrow-left","")}},u=function r(){c=i.offsetTop,s=o.offsetWidth,d=o.querySelector("p").offsetLeft,f=o.querySelector("p").offsetWidth,n.style.top=c+"px",n.style.right=s-d-f+"px",n.style.width=f+"px";var y=t.getComputedStyle(e.querySelector(".article-body p")).getPropertyValue("line-height");y=y.substring(0,y.length-2);for(var h=0;h<a.length;h++){var u=a[h],g=l[h],v=g.offsetTop,p=g.offsetLeft;u.style.top=v+parseInt(y,10)+"px",p<=s/2?(u.style.left="0px",u.style.right=""):(u.style.left="",u.style.right="0px");var m,S=p-(u.offsetLeft+(s-f)/2);u.style.setProperty("--arrow-left",S-2+"px")}};if(a.length>0&&l.length>0){t.addEventListener("load",(function(){(y=t.innerWidth||e.clientWidth||e.body.clientWidth)>896?h():u()})),t.addEventListener("resize",(function(){(y=t.innerWidth||e.clientWidth||e.body.clientWidth)>896?h():u()}));for(var g=function e(r){var i;l[r].addEventListener("click",(function(e){e.preventDefault(),y>896||a[r].classList.toggle("is-active");for(var i=e.target;i&&!i.matches(".article-body a.fn-mark, body");)i=i.parentNode;if(i&&i.matches(".article-body a.fn-mark")){var o="#"+i.getAttribute("id");o!==t.location.hash&&history.replaceState({},"",o)}}))},v=0;v<l.length;v++)g(v);e.addEventListener("click",(function(t){for(var r=t.target;r&&!r.matches(".article-footnote li.is-active, .fn-mark, body");)r=r.parentNode;if(!r||!r.matches(".article-footnote li.is-active, .fn-mark"))for(var i=e.querySelectorAll(".article-footnote li.is-active"),o=0;o<i.length;o++)i[o].classList.remove("is-active")}))}o.addEventListener("click",(function(r){var i=(y=t.innerWidth||e.clientWidth||e.body.clientWidth)>480?32:28,n=r.offsetX,a=r.offsetY,l=o.offsetWidth,c=o.offsetHeight,s=o.querySelector("p").clientWidth;a<=c&&a>=c-i&&n>=(l-s)/2&&n<=l-(l-s)/2&&(t.location.href=e.querySelector("body").getAttribute("data-root"))}))}var o=document,n;switch(e(),o.querySelector("body").classList[0]){case"http404":t();break;case"index":r();break;case"essay":i();break}}();